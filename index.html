<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Circuit Playground Simulator</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="app">
        <!-- Top Toolbar -->
        <header id="toolbar">
            <div class="toolbar-section">
                <h1>Circuit Playground</h1>
            </div>
            <div class="toolbar-section controls">
                <button id="btn-run" class="control-btn" title="Run Simulation">
                    <span class="icon">&#9654;</span> Run
                </button>
                <button id="btn-pause" class="control-btn" title="Pause Simulation" disabled>
                    <span class="icon">&#10074;&#10074;</span> Pause
                </button>
                <button id="btn-step" class="control-btn" title="Step Simulation">
                    <span class="icon">&#9655;</span> Step
                </button>
                <button id="btn-reset" class="control-btn" title="Reset Simulation">
                    <span class="icon">&#8635;</span> Reset
                </button>
                <div class="speed-control">
                    <label for="sim-speed">Speed:</label>
                    <input type="range" id="sim-speed" min="1" max="100" value="50">
                    <span id="speed-value">50x</span>
                </div>
            </div>
            <div class="toolbar-section">
                <button id="btn-clear" class="control-btn danger" title="Clear All">
                    <span class="icon">&#128465;</span> Clear
                </button>
                <button id="btn-save" class="control-btn" title="Save Circuit">
                    <span class="icon">&#128190;</span> Save
                </button>
                <button id="btn-load" class="control-btn" title="Load Circuit">
                    <span class="icon">&#128194;</span> Load
                </button>
            </div>
        </header>

        <div id="main-container">
            <!-- Component Palette -->
            <aside id="component-palette">
                <h3>Components</h3>

                <div class="palette-section">
                    <h4>Sources</h4>
                    <div class="component-grid">
                        <div class="component-item" data-component="ground" title="Ground">
                            <div class="component-icon ground-icon"></div>
                            <span>Ground</span>
                        </div>
                        <div class="component-item" data-component="dc_voltage" title="DC Voltage Source">
                            <div class="component-icon voltage-icon">V</div>
                            <span>DC Voltage</span>
                        </div>
                        <div class="component-item" data-component="ac_voltage" title="AC Voltage Source">
                            <div class="component-icon voltage-icon ac">~V</div>
                            <span>AC Voltage</span>
                        </div>
                        <div class="component-item" data-component="dc_current" title="DC Current Source">
                            <div class="component-icon current-icon">I</div>
                            <span>DC Current</span>
                        </div>
                    </div>
                </div>

                <div class="palette-section">
                    <h4>Passives</h4>
                    <div class="component-grid">
                        <div class="component-item" data-component="resistor" title="Resistor">
                            <div class="component-icon resistor-icon"></div>
                            <span>Resistor</span>
                        </div>
                        <div class="component-item" data-component="capacitor" title="Capacitor">
                            <div class="component-icon capacitor-icon"></div>
                            <span>Capacitor</span>
                        </div>
                        <div class="component-item" data-component="inductor" title="Inductor">
                            <div class="component-icon inductor-icon"></div>
                            <span>Inductor</span>
                        </div>
                    </div>
                </div>

                <div class="palette-section">
                    <h4>Semiconductors</h4>
                    <div class="component-grid">
                        <div class="component-item" data-component="diode" title="Diode">
                            <div class="component-icon diode-icon"></div>
                            <span>Diode</span>
                        </div>
                        <div class="component-item" data-component="npn_bjt" title="NPN BJT Transistor">
                            <div class="component-icon bjt-icon">NPN</div>
                            <span>NPN BJT</span>
                        </div>
                        <div class="component-item" data-component="pnp_bjt" title="PNP BJT Transistor">
                            <div class="component-icon bjt-icon">PNP</div>
                            <span>PNP BJT</span>
                        </div>
                        <div class="component-item" data-component="nmos" title="N-Channel MOSFET">
                            <div class="component-icon mosfet-icon">N</div>
                            <span>NMOS</span>
                        </div>
                        <div class="component-item" data-component="pmos" title="P-Channel MOSFET">
                            <div class="component-icon mosfet-icon">P</div>
                            <span>PMOS</span>
                        </div>
                    </div>
                </div>

                <div class="palette-section">
                    <h4>Op-Amps</h4>
                    <div class="component-grid">
                        <div class="component-item" data-component="opamp" title="Ideal Op-Amp">
                            <div class="component-icon opamp-icon"></div>
                            <span>Op-Amp</span>
                        </div>
                    </div>
                </div>

                <div class="palette-section">
                    <h4>Tools</h4>
                    <div class="component-grid">
                        <div class="component-item tool-item" data-tool="wire" title="Wire Tool">
                            <div class="component-icon wire-icon"></div>
                            <span>Wire</span>
                        </div>
                        <div class="component-item tool-item" data-tool="probe" title="Voltage Probe">
                            <div class="component-icon probe-icon">P</div>
                            <span>Probe</span>
                        </div>
                        <div class="component-item tool-item" data-tool="select" title="Select Tool">
                            <div class="component-icon select-icon"></div>
                            <span>Select</span>
                        </div>
                        <div class="component-item tool-item" data-tool="delete" title="Delete Tool">
                            <div class="component-icon delete-icon">X</div>
                            <span>Delete</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Canvas Area -->
            <main id="canvas-container">
                <canvas id="circuit-canvas"></canvas>
                <div id="canvas-overlay">
                    <span id="cursor-info"></span>
                </div>
            </main>

            <!-- Right Panel: Properties & Measurements -->
            <aside id="right-panel">
                <!-- Properties Editor -->
                <div id="properties-panel" class="panel">
                    <h3>Properties</h3>
                    <div id="properties-content">
                        <p class="placeholder">Select a component to edit its properties</p>
                    </div>
                </div>

                <!-- Measurements Panel -->
                <div id="measurements-panel" class="panel">
                    <h3>Measurements</h3>
                    <div class="measurement-tools">
                        <div class="measurement-item">
                            <label>Voltmeter:</label>
                            <span id="voltmeter-value">0.000 V</span>
                        </div>
                        <div class="measurement-item">
                            <label>Ammeter:</label>
                            <span id="ammeter-value">0.000 A</span>
                        </div>
                    </div>
                    <div id="probe-readings">
                        <h4>Probe Readings</h4>
                        <div id="probe-list"></div>
                    </div>
                </div>

                <!-- Oscilloscope -->
                <div id="oscilloscope-panel" class="panel">
                    <h3>Oscilloscope</h3>
                    <div class="scope-controls">
                        <div class="scope-control">
                            <label>Time/div:</label>
                            <select id="scope-time-div">
                                <option value="0.0001">0.1 ms</option>
                                <option value="0.001" selected>1 ms</option>
                                <option value="0.01">10 ms</option>
                                <option value="0.1">100 ms</option>
                                <option value="1">1 s</option>
                            </select>
                        </div>
                        <div class="scope-control">
                            <label>V/div:</label>
                            <select id="scope-volt-div">
                                <option value="0.1">0.1 V</option>
                                <option value="1" selected>1 V</option>
                                <option value="5">5 V</option>
                                <option value="10">10 V</option>
                            </select>
                        </div>
                    </div>
                    <canvas id="oscilloscope-canvas" width="300" height="200"></canvas>
                    <div class="scope-channels">
                        <div class="channel channel-1">
                            <input type="checkbox" id="ch1-enabled" checked>
                            <label for="ch1-enabled">CH1</label>
                            <span id="ch1-value">0.00 V</span>
                        </div>
                        <div class="channel channel-2">
                            <input type="checkbox" id="ch2-enabled">
                            <label for="ch2-enabled">CH2</label>
                            <span id="ch2-value">0.00 V</span>
                        </div>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Status Bar -->
        <footer id="status-bar">
            <span id="status-message">Ready</span>
            <span id="sim-time">Time: 0.000 s</span>
            <span id="node-count">Nodes: 0</span>
            <span id="component-count">Components: 0</span>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/math/matrix.js"></script>
    <script src="js/math/solver.js"></script>
    <script src="js/core/component.js"></script>
    <script src="js/core/node.js"></script>
    <script src="js/core/wire.js"></script>
    <script src="js/core/circuit.js"></script>
    <script src="js/components/ground.js"></script>
    <script src="js/components/sources.js"></script>
    <script src="js/components/passives.js"></script>
    <script src="js/components/semiconductors.js"></script>
    <script src="js/components/opamp.js"></script>
    <script src="js/simulation/engine.js"></script>
    <script src="js/ui/canvas.js"></script>
    <script src="js/ui/palette.js"></script>
    <script src="js/ui/properties.js"></script>
    <script src="js/ui/oscilloscope.js"></script>
    <script src="js/ui/measurements.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
